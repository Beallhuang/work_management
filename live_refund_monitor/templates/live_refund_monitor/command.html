<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>实时命令输出</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f9;
      padding: 20px;
    }
    #output {
      white-space: pre-wrap;
      background: #333;
      color: #fff;
      padding: 10px;
      border-radius: 5px;
      height: 400px;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <h1>运行 Linux 命令</h1>
  <!-- <input type="text" id="command" placeholder="输入 Linux 命令" style="width: 80%;" value="cd /home/huang.biao/jupyter_data/refund_monitor/python && /home/huang.biao/anaconda3/bin/python refund_monitor_tm_item_multiply_v241128.py"/> -->
  <select id="command" style="width: 80%;">
    <option value="cd /home/huang.biao/jupyter_data/refund_monitor/python && /home/huang.biao/anaconda3/bin/python refund_monitor_tm_item_multiply_v241128.py">输出直播退货报告</option>
    <option value="/home/huang.biao/anaconda3/bin/python /home/huang.biao/anaconda3/lib/python3.9/site-packages/base_function/industry_report_center/main.py" selected>报告中心报告上传</option>
  </select>
  <button onclick="runCommand()">运行</button>
  <div id="output"></div>

  <script>
    const socket = new WebSocket('ws://127.0.0.1:8000/ws/command/');
    const outputDiv = document.getElementById('output');

    socket.onmessage = function(event) {
      outputDiv.textContent += event.data + '\n'; // 显示命令输出
      outputDiv.scrollTop = outputDiv.scrollHeight; // 滚动到底部
    };

    function runCommand() {
      const selectElement = document.getElementById('command');
      let command = selectElement.value.trim(); // 获取用户输入的命令
      if (!command) {
        command = 'ls'; // 设置默认值，比如列出当前目录
      }
      outputDiv.textContent = ''; // 清空之前的输出
      socket.send(command); // 将命令发送到服务器
    }
  </script>
</body>
</html>